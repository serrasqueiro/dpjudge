<:
#	----------------------------------------------------------------------
def showOrdersButton():
	game, power, which, data = page.game, page.power, 'The', ''
	if game.phase == 'FORMING' or not os.path.isfile(game.file('lists')):
		return
	if game.phase != 'COMPLETED' and 'PUBLIC_LISTS' not in game.rules:
		if not power or power.type == 'OBSERVER': return
	page.write('<form method=post><input type=hidden name=page value=Read>')
	if power:
		data = """
		<input type=hidden name=power value=%s>
		<input type=hidden name=password value=%s>
		""" % (power.name, page.password)
		if power.name != 'MASTER': which = "My Power's"
	page.write(
		"""
		<input type=hidden name=file value=lists>
		<input type=hidden name=game value=%s>
		%s
		<tr><td class=bodycopy><b>Orders:</b>
		<td class=bodycopy align=right>%s Complete Order List History</b>
		<td><input class=inputSubmit type=submit value="Read"></td></form>
		""" % (game.name, data, which))
#	----------------------------------------------------------------------
def showOrders():
	page.write('<td><table border=0 cellpadding=2 cellspacing=2 width=100%>')
	game, power = page.game, page.power
	alive = power.centers or power.units or power.retreats
	if not alive and 'GARRISON' in game.rules:
		save = next = game.phase
		while next not in 'AM':
			game.phase = game.findNextPhase()
			next = game.phase.split()[-1][0]
			alive = next == 'A'
		game.phase = save
	if not alive: return showWaitNotice()
	which, shown = 'LATER', 0
	if [x for x in game.powers if x.units and not x.list['SOONER']]:
		which = 'SOONER'
	if (('MOBILIZE' in game.rules or 'BLANK_BOARD' in game.rules)
	and 'SKIP_FIRST' in game.rules): which = 'LATER'
	page.write('<p>')
	if not game.await: page.write(
		'<form %s><input type=hidden name=page value=Update>'
		'<input type=hidden name=game value=%s>'
		'<input type=hidden name=power value=%s>'
		'<input type=hidden name=password value=%s>'
		'<input type=hidden name=phase value=%s>' %
		(('onSubmit="return false"', 'method=post')[page.pwdFlag == 1],
		game.name, power.name, page.password, game.phaseAbbr()))
	if game.phaseType != 'M':
		if game.phaseType == 'A': shown = showAdjustList()
		elif game.phaseType == 'R': shown = showRetreatList()
		curPhase = game.phaseName(form = 2, phase = game.findNextPhase('M'))
	else: curPhase, shown = game.phaseName(form = 2), not game.await
	if not shown: showWaitNotice()
	nextPhase = game.phaseName(form = 2,
		phase = game.findNextPhase('M', skip = game.phaseType != 'M'))
	if game.await or game.skip: curPhase = nextPhase
	page.write(
		"""
		<tr><td class=bodycopy align=center><font size=2>
		<b>%s Order List</b></font><br>
		""" % curPhase)
	if which == 'LATER':
		text = """
			<table cellspacing=0 cellpadding=5 border=1 width=80%>
			<tr><td bgcolor=white class=bodycopy>
			<pre><font size=2>"""
		if not game.await: game.determineOrders(power, processing = 0)
		for count, order in enumerate(power.list['SOONER']):
			if game.await:
				text += order + '\n'
				continue
			if power.notes[count] == 'ignored':
				start, end = '<font color=brown><i>', '</i></font>'
			elif power.notes[count] == 'default':
				start, end = '<font color=green>', '</font>'
			elif power.notes[count] == 'ordered': start = end = ''
			elif power.notes[count] == 'revoked':
				start, end = '<strike>', '</strike>'
			elif power.notes[count] in ('proxied', 'byProxy', 'proxy??'):
				start, end = '<font color=gray>', '</font>'
			else: start, end = '<font color=red>', '</font>'
			text += (start + '[%s] ' % power.notes[count] + order + end + '\n')
		page.write(text + '</td></tr></table>')
		if shown and game.phaseType == 'M':
			page.write(
			"""
			<tr><td class=bodycopy align=center><font size=2>
			<b>%s Order List</b></font><br>
			""" % nextPhase)
	if game.skip: which = 'LATER'
	if shown:
		if game.phaseType == 'M':
			try: orders = page.errorOrders
			except: orders = power.list[which]
			rows = max(len(orders), 19) + 1
			page.write(
				'<textarea class=inputBox rows=%s cols=50 name=%s wrap=off>' %
				(rows, which))
			map(page.write, orders)
			page.write('</textarea>')
		if power.units: showWaitFlag()
		changeButton()
	page.write('</table></td>')
#	----------------------------------------------------------------------
:>
